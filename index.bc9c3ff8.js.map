{"mappings":"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","sources":["src/js/category/categories.js","src/js/category/markup.js","src/js/category/api-categories.js","<<jsx-config-pragma.js>>"],"sourcesContent":["import { newsMarkup } from './markup';\nimport { getCategoriesFromApi } from './api-categories';\nimport { NewsApiCategories } from './api-categories';\n\n\nimport { addCategori } from '../addFavourite/addFavourite';\n\nimport newDefaultMarkup from '../defaultPage/defaultPageHome';\n\nconst newsApiCategories = new NewsApiCategories();\nconst categoriesBtn = document.querySelector('.newsHP-categories');\ncategoriesBtn.addEventListener('click', onCategoryOthers);\nconst categoriesList = document.querySelector('.categories');\nconst othersBtn = document.querySelector('button.others');\n\nexport async function getCategories() {\n  try {\n    const result = await getCategoriesFromApi();\n    const categories = result.data.results;\n\n    let markupOthersDiv = [];\n    let queryMobile = window.matchMedia('(max-width: 767px)');\n    let queryTableMin = window.matchMedia('(min-width: 768px)');\n    let queryTableMax = window.matchMedia('(max-width: 1279px)');\n\n    categories.forEach((category, index) => {\n      if (queryMobile.matches) {\n        markupOthersDiv.push(createMarkupUl(category));\n      } else if (queryTableMin.matches && queryTableMax.matches) {\n        if (index >= 4) {\n          markupOthersDiv.push(createMarkupUl(category));\n        }\n      } else {\n        if (index >= 6) {\n          markupOthersDiv.push(createMarkupUl(category));\n        }\n      }\n    });\n    const categoriesMobile = document.querySelector('.categories-list');\n    categoriesMobile.insertAdjacentHTML('beforeend', markupOthersDiv.join(''));\n    categoriesList.addEventListener('click', showMenu);\n    const categoriesClose = document.querySelector('body');\n    othersBtn.addEventListener('click', showMenu);\n    const category = document.querySelectorAll('.category');\n    category.forEach(el => {\n      el.addEventListener('click', onClick);\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\ngetCategories();\nfunction createMarkupUl({ display_name }) {\n  return `\n  <li class=\"category\"><span>${display_name}</span></li>\n    `;\n}\nfunction onClick(e) {\n  e.preventDefault();\n  const category = e.target.textContent.toLowerCase();\n  newsApiCategories.searchCategories = category;\n  const categoriesMarkup = newsApiCategories.getNews().then(json => {\n    const get = json.data.results;\n    if( get == null) {\n      newDefaultMarkup();\n      document.getElementById('pagination-container').style.display = 'none';\n      return;\n    }\n\n    const gallery = document.querySelector('.gallery');\n    const categoriesMarkup = get.map(element => newsMarkup(element));\n    gallery.innerHTML = categoriesMarkup.join('');\n    addCategori(get);\n  });\n}\nfunction onCategoryOthers() {\n  showMenu();\n  const category = document.querySelectorAll('.category');\n  category.forEach(el => {\n    el.addEventListener('click', onClick);\n  });\n}\nfunction showMenu() {\n  const iconMobile = document.querySelector('.categ-arrow-down');\n  const iconOthers = document.querySelector('.others-arrow-down');\n  categoriesList.classList.toggle('show');\n  categoriesList.classList.toggle('hidden');\n  iconMobile.classList.toggle('switchedImg');\n  iconOthers.classList.toggle('switchedImg');\n  categoriesBtn.classList.toggle('categoriesBtnOpened');\n  othersBtn.classList.toggle('othersBtnOpened');\n}\n","import dateFormat, { masks } from 'dateformat';\nexport function newsMarkup({\n  //   id, //data-id=\"${id}\"\n  multimedia,\n  section, //category\n  abstract, //description\n  title, //title\n  published_date,\n  url, //Read more\n  slug_name,\n}) {\n  const img = multimedia[2].url;\n  // console.log(img); //------ссилка на картинку\n  function checkUrkImg() {\n    if (!multimedia.length) {\n      return 'https://placehold.co/400x400?text=NO+IMAGE';\n    }\n    return img;\n  }\n  return `\n  <div class=\"newsHomePage-card\" data-id=${slug_name}>\n  <div class=\"card-picture\">\n      <img\n        class=\"newsHomePage-image\"\n        src=\"${checkUrkImg()}\"\n        alt=\"news cover\"\n        width=\"288\"\n        height=\"395\"\n      />\n      <p class=\"dispNo newsHomePage-status-read\">Already read</p>\n      <p class=\"newsHomePage-search-category\">${section}</p>\n      \n      <button class=\"add-to-favBtn test-favBtn\" type=\"button\" data-id=${slug_name}>Add to favourite\n                  <svg class=\"heart\" width=\"16\" height=\"16\">\n                      <use href=\"/assets/svg/symbol-defs.svg#icon-unclicked_heart\">\n                      </use>\n                  </svg>\n              </button>\n    </div>\n    <div>\n      <h2 class=\"newsHomePage-title\">\n        ${title}\n      </h2>\n      <p class=\"newsHomePage-text\">\n        ${formatingDerscription(abstract)}\n      </p>\n    </div>\n    <div class=\"homePage-readMore\">\n      <p class=\"newsHomePage-date\">${firmatDate(published_date)}</p>\n      <a class=\"newsHomePage-readMore-link\" target = \"_blank\" href=\"${url}\">Read more</a>\n    </div>\n  </div>\n  </div>`;\n}\n\nfunction firmatDate(date) {\n  const now = new Date(date);\n  return dateFormat(now, 'dd/mm/yyyy');\n}\nfunction formatingDerscription(description) {\n  let newFormat = description;\n  if (newFormat.length > 80) {\n    newFormat = description.slice(0, 80) + '...';\n  }\n  return newFormat;\n}\n","const axios = require('axios').default;\n\nconst KEY = '13J2OJQdfSen9tQqVIHpzfTVNgWWH6dm';\nconst CATEGORIES =\n  'https://api.nytimes.com/svc/news/v3/content/section-list.json';\n\nexport function getCategoriesFromApi() {\n  const URL = `${CATEGORIES}?api-key=${KEY}`;\n  return axios.get(URL);\n}\nexport class NewsApiCategories {\n  constructor() {\n    this.searchCategories = '';\n  }\n  async getNews() {\n    const SEARCH_CATEGORIES = `https://api.nytimes.com/svc/news/v3/content/inyt/${this.searchCategories}.json?api-key=${KEY}`;\n\n    return await axios.get(SEARCH_CATEGORIES);\n  }\n}\n",null],"names":["$7pbsT","parcelRequire","$kngbI","$39ebbadc3b1acd87$export$9f080f791a5f105f","param","date","now","multimedia","section","abstract","title","published_date","url","slug_name","img","concat","length","description","newFormat","slice","$39ebbadc3b1acd87$var$formatingDerscription","Date","default","$37b457f26f9bd7c3$var$KEY","$37b457f26f9bd7c3$var$CATEGORIES","$37b457f26f9bd7c3$export$e6b00275c89a712c","NewsApiCategories","this","searchCategories","key","SEARCH_CATEGORIES","_this","$37b457f26f9bd7c3$require$axios","get","_state","sent","$27bc80a189917123$var$newsApiCategories","$27bc80a189917123$var$categoriesBtn","document","querySelector","addEventListener","$27bc80a189917123$var$showMenu","querySelectorAll","forEach","el","$27bc80a189917123$var$onClick","$27bc80a189917123$var$categoriesList","$27bc80a189917123$var$othersBtn","$27bc80a189917123$var$_getCategories","result","categories","markupOthersDiv","queryMobile","queryTableMin","queryTableMax","error","URL","data","results","window","matchMedia","category","index","matches","push","$27bc80a189917123$var$createMarkupUl","insertAdjacentHTML","join","console","log","apply","arguments","display_name","e","preventDefault","target","textContent","toLowerCase","getNews","then","json","$7D6Cl","getElementById","style","display","gallery","categoriesMarkup","map","element","innerHTML","$bAIBP","addCategori","iconMobile","iconOthers","classList","toggle","$27bc80a189917123$export$7a0f33e8df10bd94"],"version":3,"file":"index.bc9c3ff8.js.map"}