{"mappings":"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","sources":["src/js/category/markup.js","src/js/category/api-categories.js","src/js/category/categories.js"],"sourcesContent":["import dateFormat, { masks } from 'dateformat';\nexport function newsMarkup({\n  //   id, //data-id=\"${id}\"\n  multimedia,\n  section, //category\n  abstract, //description\n  title, //title\n  published_date,\n  url, //Read more\n  slug_name,\n}) {\n  const img = multimedia[2].url;\n  // console.log(img); //------ссилка на картинку\n  function checkUrkImg() {\n    if (!multimedia.length) {\n      return 'https://placehold.co/400x400?text=NO+IMAGE';\n    }\n    return img;\n  }\n  return `\n  <div class=\"newsHomePage-card\" data-id=${slug_name}>\n  <div class=\"card-picture\">\n      <img\n        class=\"newsHomePage-image\"\n        src=\"${checkUrkImg()}\"\n        alt=\"news cover\"\n        width=\"288\"\n        height=\"395\"\n      />\n      <p class=\"newsHomePage-status-read\">Already read</p>\n      <p class=\"newsHomePage-search-category\">${section}</p>\n      \n      <button class=\"add-to-favBtn test-favBtn\" type=\"button\" data-id=${slug_name}>Add to favourite\n                  <svg class=\"heart\" width=\"16\" height=\"16\">\n                      <use href=\"/assets/svg/symbol-defs.svg#icon-unclicked_heart\">\n                      </use>\n                  </svg>\n              </button>\n    </div>\n    <div>\n      <h2 class=\"newsHomePage-title\">\n        ${title}\n      </h2>\n      <p class=\"newsHomePage-text\">\n        ${formatingDerscription(abstract)}\n      </p>\n    </div>\n    <div class=\"homePage-readMore\">\n      <p class=\"newsHomePage-date\">${firmatDate(published_date)}</p>\n      <a class=\"newsHomePage-readMore-link\" target = \"_blank\" href=\"${url}\">Read more</a>\n    </div>\n  </div>\n  </div>`;\n}\n\nfunction firmatDate(date) {\n  const now = new Date(date);\n  return dateFormat(now, 'dd/mm/yyyy');\n}\nfunction formatingDerscription(description) {\n  let newFormat = description;\n  if (newFormat.length > 80) {\n    newFormat = description.slice(0, 80) + '...';\n  }\n  return newFormat;\n}\n","const axios = require('axios').default;\n\nconst KEY = '13J2OJQdfSen9tQqVIHpzfTVNgWWH6dm';\nconst CATEGORIES =\n  'https://api.nytimes.com/svc/news/v3/content/section-list.json';\n\nexport function getCategoriesFromApi() {\n  const URL = `${CATEGORIES}?api-key=${KEY}`;\n  return axios.get(URL);\n}\nexport class NewsApiCategories {\n  constructor() {\n    this.searchCategories = '';\n  }\n  async getNews() {\n    const SEARCH_CATEGORIES = `https://api.nytimes.com/svc/news/v3/content/inyt/${this.searchCategories}.json?api-key=${KEY}`;\n\n    return await axios.get(SEARCH_CATEGORIES);\n  }\n}\n","import { newsMarkup } from './markup';\nimport { getCategoriesFromApi } from './api-categories';\nimport { NewsApiCategories } from './api-categories';\n\n\nimport { addCategori } from '../addFavourite/addFavourite';\n\nimport newDefaultMarkup from '../defaultPage/defaultPageHome';\n\nconst newsApiCategories = new NewsApiCategories();\nconst categoriesBtn = document.querySelector('.newsHP-categories');\ncategoriesBtn.addEventListener('click', onCategoryOthers);\nconst categoriesList = document.querySelector('.categories');\nconst othersBtn = document.querySelector('button.others');\n\nexport async function getCategories() {\n  try {\n    const result = await getCategoriesFromApi();\n    const categories = result.data.results;\n\n    let markupOthersDiv = [];\n    let queryMobile = window.matchMedia('(max-width: 767px)');\n    let queryTableMin = window.matchMedia('(min-width: 768px)');\n    let queryTableMax = window.matchMedia('(max-width: 1279px)');\n\n    categories.forEach((category, index) => {\n      if (queryMobile.matches) {\n        markupOthersDiv.push(createMarkupUl(category));\n      } else if (queryTableMin.matches && queryTableMax.matches) {\n        if (index >= 4) {\n          markupOthersDiv.push(createMarkupUl(category));\n        }\n      } else {\n        if (index >= 6) {\n          markupOthersDiv.push(createMarkupUl(category));\n        }\n      }\n    });\n    const categoriesMobile = document.querySelector('.categories-list');\n    categoriesMobile.insertAdjacentHTML('beforeend', markupOthersDiv.join(''));\n    categoriesList.addEventListener('click', showMenu);\n    const categoriesClose = document.querySelector('body');\n    othersBtn.addEventListener('click', showMenu);\n    const category = document.querySelectorAll('.category');\n    category.forEach(el => {\n      el.addEventListener('click', onClick);\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\ngetCategories();\nfunction createMarkupUl({ display_name }) {\n  return `\n  <li class=\"category\"><span>${display_name}</span></li>\n    `;\n}\nfunction onClick(e) {\n  e.preventDefault();\n  const category = e.target.textContent.toLowerCase();\n  newsApiCategories.searchCategories = category;\n  const categoriesMarkup = newsApiCategories.getNews().then(json => {\n    const get = json.data.results;\n    if( get == null) {\n      newDefaultMarkup();\n      document.getElementById('pagination-container').style.display = 'none';\n      return;\n    }\n\n    const gallery = document.querySelector('.gallery');\n    const categoriesMarkup = get.map(element => newsMarkup(element));\n    gallery.innerHTML = categoriesMarkup.join('');\n    addCategori(get);\n  });\n}\nfunction onCategoryOthers() {\n  showMenu();\n  const category = document.querySelectorAll('.category');\n  category.forEach(el => {\n    el.addEventListener('click', onClick);\n  });\n}\nfunction showMenu() {\n  const iconMobile = document.querySelector('.categ-arrow-down');\n  const iconOthers = document.querySelector('.others-arrow-down');\n  categoriesList.classList.toggle('show');\n  categoriesList.classList.toggle('hidden');\n  iconMobile.classList.toggle('switchedImg');\n  iconOthers.classList.toggle('switchedImg');\n  categoriesBtn.classList.toggle('categoriesBtnOpened');\n  othersBtn.classList.toggle('othersBtnOpened');\n}\n"],"names":["$9hK8P","parcelRequire","$3dcf437a489333b7$export$9f080f791a5f105f","multimedia","section","abstract","title","published_date","url","slug_name","img","length","description","newFormat","slice","$3dcf437a489333b7$var$formatingDerscription","date","now","Date","default","$3dcf437a489333b7$var$firmatDate","$029b10ef40853541$var$KEY","$029b10ef40853541$var$CATEGORIES","$029b10ef40853541$export$dd60aff6830f8c71","URL","$029b10ef40853541$require$axios","get","$929a103b457b1dbc$var$newsApiCategories","async","SEARCH_CATEGORIES","this","searchCategories","constructor","$929a103b457b1dbc$var$categoriesBtn","document","querySelector","addEventListener","$929a103b457b1dbc$var$showMenu","querySelectorAll","forEach","el","$929a103b457b1dbc$var$onClick","$929a103b457b1dbc$var$categoriesList","$929a103b457b1dbc$var$othersBtn","$929a103b457b1dbc$var$createMarkupUl","display_name","e","preventDefault","category","target","textContent","toLowerCase","getNews","then","json","data","results","$9tq7s","getElementById","style","display","gallery","categoriesMarkup","map","element","innerHTML","join","$kOvvy","addCategori","iconMobile","iconOthers","classList","toggle","categories","markupOthersDiv","queryMobile","window","matchMedia","queryTableMin","queryTableMax","index","matches","push","insertAdjacentHTML","error","console","log","$929a103b457b1dbc$export$7a0f33e8df10bd94"],"version":3,"file":"index.753d7ba9.js.map"}